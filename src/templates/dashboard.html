<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/public/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"
    />
    <title>wtmm dashboard</title>
    <style></style>
  </head>
  <body>
    <header class="pa2 ma2">
      <h1>Summary</h1>
      <p class="o-60 fw6">{{ email }}</p>
    </header>
    <!-- TOTAL SPEND SECTION -->
    <section class="pa2 ma2 card shadow-2 flex flex-column justify-between h4">
      <p class="chart-caption">Total spend</p>
      <div>
        <span class="b f2">${{ totalSpend }}</span>
        <span class="fw6 o-50">in the last {{ period }} days</span>
      </div>
    </section>
    <!-- DAILY SPEND BAR CHART -->
    <!-- This section is relative so we can absolutely position the tooltip within it -->
    <section class="pa2 ma2 card shadow-2 relative">
      <!-- Tooltips. They are all hidden (display: none) by default
            An on-click javascript handler displays them -->
      {{#purchaseByDate}}
      <section
        data-purchase-date="{{ date }}"
        class="pa1 ma1 card dn ba bw1 b--light-silver purchase-detail absolute top-2 left-0 right-1"
      >
        {{#purchases}}
        <div class="mv2 flex justify-between">
          <span class="mh3 f6 fw6 o-80">{{ merchant }}</span>
          <span class="f6">${{ amount }}</span>
        </div>
        {{/purchases}}
      </section>
      {{/purchaseByDate}}
      <!-- The data is presented as a table. CSS is used to force it to look like a bar chart -->
      <table>
        <caption class="dib chart-caption">
          Daily spend $
        </caption>
        <thead class="h3">
          <tr>
            <th class="accessible-hide" scope="row">Date</th>
            <th class="accessible-hide" scope="row">Spend</th>
          </tr>
        </thead>
        <tbody>
          {{#spend}}
          <tr data-purchase-date="{{ date }}" class="bar-container">
            <td class="bar-x-axis tc o-70">
              <div>{{ dayOfWeek }}</div>
              <div>{{ day }}</div>
            </td>
            <td class="bar">
              <div class="bar-label fw6 o-50">{{ spendInDollars }}</div>
              <div
                class="bar-fill"
                style="height: {{ percentageOfMaxSpend }}%"
              ></div>
            </td>
          </tr>
          {{/spend}}
        </tbody>
      </table>
    </section>
    <script type="module" src="public/dashboard.js"></script>
  </body>
</html>
